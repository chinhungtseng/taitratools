area, " ==> ",
.area_tbl[.area_tbl$areaName == area, ][["countryName"]]
))
document()
tt_area_show("亞洲")
load_all()
tt_area_show("亞洲")
load_all()
tt_area_show(all = TRUE)
tt_area_show()
load_all()
tt_area_show()
tt_area_show("亞洲")
.full_hscode_tbl
.full_hscode_tbl
tt_ls(\)
tt_ls()
tmp_tbl
# industry21 data
tmp_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
tmp_tbl
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "083", "088", "102", "105", "106", "107", "108", "110", "115",
"120", "134", "157", "158", "174", "175", "179", "180", "184", "185",
"189", "196", "197", "198", "199", "222", "223", "224", "225", "226",
"227", "228", "229", "233", "234", "238", "239", "240", "241", "257",
"263", "298", "353", "354")
.industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
.industry_tbl
# TODO Adding some common
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
tt_source_path <- as.list(tmp_path$path)
names(tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "083", "088", "102", "105", "106", "107", "108", "110", "115",
"120", "134", "157", "158", "174", "175", "179", "180", "184", "185",
"189", "196", "197", "198", "199", "222", "223", "224", "225", "226",
"227", "228", "229", "233", "234", "238", "239", "240", "241", "257",
"263", "298", "353", "354")
tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(tt_source_path, tt_ind21_tbl, .industry_tbl, tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
load_all()
taitratools:::.industry_tbl
tt_ls()
document()
install()
build()
build()
install()
load_all()
taitratools:::.full_hscode_tbl
taitratools:::.area_tbl
taitratools:::.industry_tbl
"\u5168\u90E8\u7522\u54C1_\u5168\u90E8\u7522\u54C1"
load_all()
install()
build()
col_more
fixed_cny_nm
load_all()
tmp_df <- tt_read_mof("2019-01", "2019-01")
tmp_df
tidyr::separate(tmp_df, year, into = c("year", "month"))
load_all()
tt_read_mof("2019-02", "2019-03", dep_month_cols = TRUE)
tt_read_mof("2019-02", "2019-03")
document()
install()
check()
ddocument()
document()
check()
document()
document()
check()
?tt_read_mof
document()
check()
document()
check()
?tt_read_mof
document()
check()
install()
build()
tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "083", "088", "102", "105", "106", "107", "108", "110", "115",
"120", "134", "157", "158", "174", "175", "179", "180", "184", "185",
"189", "196", "197", "198", "199", "222", "223", "224", "225", "226",
"227", "228", "229", "233", "234", "238", "239", "240", "241", "257",
"263", "298", "353", "354")
length()
length(tt_ind21_list)
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
tt_source_path <- as.list(tmp_path$path)
names(tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "078", "083", "087", "088", "105", "106", "107", "108", "109",
"110", "115", "120", "127", "158", "174", "179", "184", "198", "199",
"205", "206", "212", "221", "224", "229", "241", "257", "263", "264",
"265", "266", "267", "268", "269", "270", "298")
tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(tt_source_path, tt_ind21_tbl, .industry_tbl, tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
load_all()
load_all()
tt_update_data()
load_all()
gt <- tt_read_mof("2019-01", "2019-01")
gr %>%
tt_bind_industry(ind21 = TRUE)
tt_bind_industry(gr, ind21 = TRUE)
gr
tt_bind_industry(gt, ind21 = TRUE)
fg <- tt_bind_industry(gt, ind21 = TRUE)
fg
unique(fg$industry)
"\u7DE8\u865F"
"\u7DE8\u865F"
tt_ind21_tbl
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
tt_source_path <- as.list(tmp_path$path)
names(tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "078", "083", "087", "088", "105", "106", "107", "108", "109",
"110", "115", "120", "127", "158", "174", "179", "184", "198", "199",
"205", "206", "212", "221", "224", "229", "241", "257", "263", "264",
"265", "266", "267", "268", "269", "270", "298")
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(tt_source_path, .tt_ind21_tbl, .industry_tbl, tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
document()
load_all()
gt <- tt_read_mof("2019-01", "2019-01")
fg <- tt_bind_industry(gt, ind21 = TRUE)
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
tt_source_path <- as.list(tmp_path$path)
names(tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "078", "083", "087", "088", "105", "106", "107", "108", "109",
"110", "115", "120", "127", "158", "174", "179", "184", "198", "199",
"205", "206", "212", "221", "224", "229", "241", "257", "263", "264",
"265", "266", "267", "268", "269", "270", "298")
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(tt_source_path, .tt_ind21_tbl, .industry_tbl, tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
load_all()
load_all()
gt <- tt_read_mof("2019-01", "2019-01")
fg <- tt_bind_industry(gt, ind21 = TRUE)
tt_source_path
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- c("001", "007", "018", "028", "033", "045", "050", "054", "058", "062",
"078", "078", "083", "087", "088", "105", "106", "107", "108", "109",
"110", "115", "120", "127", "158", "174", "179", "184", "198", "199",
"205", "206", "212", "221", "224", "229", "241", "257", "263", "264",
"265", "266", "267", "268", "269", "270", "298")
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
document()
load_all()
tt_ls()
gt <- tt_read_mof("2019-01", "2019-01")
load_all()
cwidth <- max(stringr::str_length(names(.tt_source_path)))
tt_ls()
tt_get_path()
load_all()
tt_get_path()
tt_get_path("PATH_AREA")
gt <- tt_read_mof("2019-01", "2019-01")
fg <- tt_bind_industry(gt, ind21 = TRUE)
unique(fg$industry)
taitratools:::.packageName
taitratools:::.tt_ind21_list
tt_hscode_show("01")
load_all()
.industry_tbl
taitratools:::.tt_ind21_tbl
xlsx::write.xlsx(as.data.frame(taitratools:::.tt_ind21_tbl), "industry_21_list.xlsx")
tt_read_table("inst/extdata/industry_21_list.xlsx")
.tt_ind21_tbl
"\u7DE8\u865F"
.tt_ind21_tbl
check_tbl
.industry_tbl
tt_read_table("inst/extdata/industry_21_list.xlsx")
industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
.industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
.industry_tbl
.industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
tt_read_table("inst/extdata/industry_21_list.xlsx")
tt_read_table("inst/extdata/industry_21_list.xlsx")[["編號"]]
"\u7DE8\u865F"
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- tt_read_table("inst/extdata/industry_21_list.xlsx")[["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
.tt_ind21_tbl
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- tt_read_table("inst/extdata/industry_21_list.xlsx")[["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
.tt_ind21_list
.tt_ind21_tbl
load_all()
.industry_tbl
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- tt_read_table("inst/extdata/industry_21_list.xlsx")[["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
tt_get_path
getsourcepath <- function() {
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
save(.tt_source_path, file = "R/sysdata.rda")
}
getsourcepath()
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- tt_read_table("inst/extdata/industry_21_list.xlsx")[["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
load_all()
getsourcepath <- function() {
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
save(.tt_source_path, file = "R/sysdata.rda")
}
getsourcepath()
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- tt_read_table("inst/extdata/industry_21_list.xlsx")[["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
tt_update_data()
load_all()
tt_ls()
.industry_tbl
taitratools:::.tt_ind21_list
# TODO Adding some common
getsourcepath <- function() {
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
save(.tt_source_path, file = "R/sysdata.rda")
}
getsourcepath()
tt_update_data()
load_all()
taitratools:::.industry_tbl
tr <- tt_read_mof("2019-01", "2019-01")
tt_bind_industry(tr)
build()
tt_read_table(tt_get_path("PATH_INDUSTRY"))
tt_read_table(tt_get_path("PATH_INDUSTRY"))[["report"]]
tt_read_table(tt_get_path("PATH_INDUSTRY"))[["reports"]]
tt_read_table(tt_get_path("PATH_INDUSTRY"))[["reports"]] == 1
tt_read_table(tt_get_path("PATH_INDUSTRY"))[tt_read_table(tt_get_path("PATH_INDUSTRY"))[["reports"]] == 1]
.tt_ind21_list
.industry_tbl
.industry_tbl[["reports"]]
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.industry_tbl
load_all()
taitratools:::.industry_tbl
.industry_tbl
.industry_tbl[["reports"]]
.industry_tbl[.industry_tbl[["reports"]] == 1]
.industry_tbl[.industry_tbl[["reports"]] == 1, ]
"\u7DE8\u865F"
.industry_tbl[.industry_tbl[["reports"]] == 1, ][["\u7DE8\u865F"]]
# TODO Adding some common
getsourcepath <- function() {
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
save(.tt_source_path, file = "R/sysdata.rda")
}
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- .industry_tbl[.industry_tbl[["reports"]] == 1, ][["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
getsourcepath()
# TODO Adding some common
getsourcepath <- function() {
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
save(.tt_source_path, file = "R/sysdata.rda")
}
tt_update_data <- function() {
# tt_source_path data
tmp_path <- readxl::read_xlsx("inst/extdata/tt_source_path.xlsx")
.tt_source_path <- as.list(tmp_path$path)
names(.tt_source_path) <- tmp_path$name
# industry21 data
.industry_tbl <- tt_read_table(tt_get_path("PATH_INDUSTRY"))
.tt_ind21_list <- .industry_tbl[.industry_tbl[["reports"]] == 1, ][["\u7DE8\u865F"]]
.tt_ind21_tbl <- .industry_tbl[.industry_tbl[["\u7DE8\u865F"]] %in% .tt_ind21_list, ][c("\u7DE8\u865F", "industry")]
# full hsocde data
.full_hscode_tbl <- tt_read_table(tt_get_path("PATH_FULL_HSCODE"))
tmp <- lapply(list(1:2, 3:4, 5:6, 7:8, 9:10), function(x) {
tmp <- unique(.full_hscode_tbl[x])
names(tmp) <- c("hscode", "hscode_cn")
tmp
})
.full_hscode_tbl <- Reduce(rbind, tmp)
# area data
.area_tbl <- tt_read_table(tt_get_path("PATH_AREA"))
.area_tbl[.area_tbl$areaName == "全球", ][["countryName"]] <- "[\\w\\W]+"
# save data
save(.tt_source_path, .tt_ind21_tbl, .industry_tbl, .tt_ind21_list, .full_hscode_tbl, .area_tbl, file = "R/sysdata.rda")
}
getsourcepath()
tt_update_data()
load_all()
taitratools:::.industry_tbl
.tt_ind21_list
.tt_ind21_tbl
install()
build()
